# clash-verge-script

## 概述

这是一个用于 Clash Verge 的扩展脚本，旨在通过自定义代理组、规则集提供者和流量规则，实现对网络流量的精细化控制和优化。本脚本可以帮助用户更灵活地管理代理配置，包括分流、广告拦截、针对特定服务的优化（如AI、自建服务）以及对不同地区流量的处理。

## 功能特性

- **灵活的代理组配置**：
  - **主选择组**：如 `✈️ ‍起飞`，用于快速切换不同代理策略。
  - **智能测速组**：如 `⚡ ‍低延迟` 和 `📜 天书`，通过 `url-test` 自动选择性能最佳的节点，并支持排除或包含特定关键字的节点。
  - **自定义筛选组**：如 `🔧 ‍自建`，支持根据节点名称关键字（如"自建"）自动归类节点。
  - **特定功能组**：如 `💩 ‍广告` 用于广告拦截，`🤖 ‍AI` 用于AI相关服务的代理。
  - **地域分流组**：如 `🛩️ ‍墙内`，用于处理直连或拒绝连接的流量。
  - **未知站点处理**：`🌐 ‍未知站点` 组用于捕获未被其他规则匹配的流量。

- **丰富的规则集提供者**：
  - 集成了多种主流规则集，如 `ProxyGFWlist`（封锁）、`LoyalDirect`（直连域名）、`LoyalCnCIDR`（中国大陆IP）、`LoyalLanCIDR`（局域网IP）、`reject`（广告）和 `applications`（常见软件直连）。
  - 支持从 CDN 加载规则集，确保规则的及时更新。

- **精细的流量控制规则**：
  - 支持自定义直连规则，例如针对特定域名（如自建服务）的直连。
  - 通过 `RULE-SET` 和 `GEOIP` 规则，实现对广告、直连服务、中国大陆流量和GFWlist流量的自动分流。
  - 优先级分明的规则链，确保流量按照预期路径转发。

## 如何使用

1.  **下载脚本**：
    将 `Clash-Verge.js` 文件下载到您的本地目录。

2.  **配置 Clash Verge**：
    - 打开 Clash Verge 客户端。
    - 进入"设置"或"Profiles"页面，找到"脚本模式"或"External Controller"相关配置项。
    - 将 `Clash-Verge.js` 文件路径配置到 Clash Verge 中作为扩展脚本加载。
    - 确保您的 Clash Verge 配置支持加载外部 JavaScript 脚本，通常需要将脚本路径添加到相应的配置字段。

3.  **更新订阅**：
    - 加载本脚本后，您的 Clash Verge 客户端会自动根据脚本中定义的规则集提供者下载和更新规则。

4.  **调整配置（可选）：
    - 您可以根据自己的需求，修改 `Clash-Verge.js` 文件中的 `customProxyGroups`、`customRuleProviders` 和 `customRules` 变量，以进一步自定义代理行为和规则。

## 示例脚本

项目中还包含一些示例脚本，您可以参考它们来了解如何实现更高级的自定义功能：

- **示例-剔除高倍率节点.js**：该脚本演示了如何根据节点名称中的倍率信息过滤节点，只保留低倍率的节点，避免使用高倍率节点产生额外费用。

- **示例-自定义规则(集).js**：该脚本展示了更复杂的配置方式，包括：
  - 更精细的 DNS 配置，针对不同域名使用不同的 DNS 服务器
  - 更丰富的规则集，包括 Apple、Google、Telegram 等常用服务
  - 多种代理组类型，如 fallback（故障转移）、load-balance（负载均衡）等
  - 图标支持，提升用户体验

- **Clash-Verge-simple.js**：这是主脚本的简化版本，去除了链式代理等高级功能，适合新手用户或不需要复杂配置的场景。

### 脚本选择建议

- **新手用户**：推荐使用 `Clash-Verge-simple.js`，配置简单，易于理解和使用。

- **进阶用户**：推荐使用 `Clash-Verge.js`，包含链式代理等高级功能，可以满足更复杂的使用场景。

- **特殊需求**：如果需要剔除高倍率节点，可以参考 `示例-剔除高倍率节点.js`；如果需要更复杂的规则配置，可以参考 `示例-自定义规则(集).js`。